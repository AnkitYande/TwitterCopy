(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{30:function(e,t,s){e.exports=s(64)},35:function(e,t,s){},36:function(e,t,s){},64:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(28),i=s.n(n),l=(s(35),s(9)),o=s(3),c=(s(36),s(10)),p=s(11);class u extends a.Component{render(){return r.a.createElement("div",{className:"sidenav"},r.a.createElement(l.b,{to:"/"},r.a.createElement(c.a,{style:{cursor:"pointer",fontSize:"1.5rem",marginRight:10},icon:p.b,onClick:this.likeTweet}),"Home"),null==this.props.user?r.a.createElement(l.b,{to:"/login"},r.a.createElement(c.a,{style:{cursor:"pointer",fontSize:"1.5rem",marginRight:10},icon:p.c,onClick:this.likeTweet}),"Login"):r.a.createElement(l.b,{to:"/profile"},r.a.createElement(c.a,{style:{cursor:"pointer",fontSize:"1.5rem",marginRight:10},icon:p.f,onClick:this.likeTweet}),"Profile"),r.a.createElement(l.b,{to:"/Liked"},r.a.createElement(c.a,{style:{cursor:"pointer",fontSize:"1.5rem",marginRight:10},icon:p.a,onClick:this.likeTweet}),"Likes"),r.a.createElement("a",{onClick:()=>{this.props.toggleOpen()}},r.a.createElement("button",{className:"btn",style:{margin:0}},"Tweet")))}}var h=u,m=s(2),d=s.n(m);class g extends a.Component{constructor(){super(...arguments),this.state={username:"",password:"",user:null,valid:!1},this.onChangeU=e=>this.setState({username:e.target.value}),this.onChangeP=e=>this.setState({password:e.target.value}),this.onSubmit=e=>{e.preventDefault(),this.verifyUser()},this.verifyUser=async()=>{const e={username:this.state.username,password:this.state.password};console.log(e),await d.a.post("/users/verify",e).then(e=>{"string"==typeof e.data?alert(e.data):(this.setState({user:e.data}),this.props.updateUser(this.state.username),this.setState({valid:!0}))})}}render(){return this.state.user?(this.setState({valid:!1}),r.a.createElement(o.a,{to:"/"})):r.a.createElement("div",{className:"App-Body"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",name:"Username",placeholder:"Username",value:this.state.username,onChange:this.onChangeU,className:"textfield"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"Password",placeholder:"Password",value:this.state.password,onChange:this.onChangeP,className:"textfield"}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Login",className:"btn"})),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/SignUp"},"Sign Up"))}}var w=g;class E extends a.Component{constructor(){super(...arguments),this.state={username:"",password:"",valid:!1},this.onChangeU=e=>this.setState({username:e.target.value}),this.onChangeP=e=>this.setState({password:e.target.value}),this.onSubmit=e=>{e.preventDefault(),this.checkUser()},this.checkUser=async()=>{this.state.username.length<3?alert("Username too Short!"):this.state.password.length<5?alert("Password too Short!"):await d.a.get("/users/get/"+this.state.username).then(e=>{null!=e.data?alert("Username Taken!"):this.addUser()}).catch(e=>{console.log(e)})},this.addUser=async()=>{const e={username:this.state.username,password:this.state.password,role:"user"};await d.a.post("/users/add",e).then(e=>{this.setState({user:e.data},this.verifyUser),console.log(this.state.user)}).catch(e=>{console.log(e)}),this.props.updateUser(this.state.username),setTimeout(1e4),this.setState({valid:!0})}}render(){return this.state.valid?(this.setState({valid:!1}),r.a.createElement(o.a,{to:"/"})):r.a.createElement("div",{className:"App-Body"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",name:"Username",placeholder:"Username",value:this.state.username,onChange:this.onChangeU,className:"textfield"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"Password",placeholder:"Password",value:this.state.password,onChange:this.onChangeP,className:"textfield"}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Sign Up",className:"btn"})),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/Login"},"Login"))}}var v=E;class b extends a.Component{constructor(){super(...arguments),this.likeTweet=async()=>{if(this.props.user){if(this.props.liked){console.log(this.props.user+" unliked "+this.props.id);const e={username:this.props.user,tweetID:this.props.id};console.log(e),await d.a.put("/users/unlike",e)}else{console.log(this.props.user+" liked "+this.props.id);const e={username:this.props.user,tweetID:this.props.id};await d.a.put("/users/like",e)}this.update()}else alert("You must login to like tweets")},this.deleteTweet=async()=>{await d.a.delete("/tweets/"+this.props.id),this.update()},this.update=()=>{this.props.updateTweets(),this.forceUpdate()}}render(){return r.a.createElement("div",{className:"tweet-cell"},r.a.createElement("div",{className:"tweet-cell-flex"},r.a.createElement("p",null,r.a.createElement("b",null,this.props.username)," ",this.props.date.substring(0,10)," "),this.props.username===this.props.user?r.a.createElement(c.a,{className:"like-btn",style:{cursor:"pointer",fontSize:"1rem",marginRight:10},icon:p.e,onClick:this.deleteTweet}):r.a.createElement(r.a.Fragment,null)),r.a.createElement("p",null,this.props.message),this.props.liked?r.a.createElement(c.a,{className:"like-btn",style:{cursor:"pointer",fontSize:"1rem",marginRight:10,color:"rgb(224, 36, 94)"},icon:p.a,onClick:this.likeTweet}):r.a.createElement(c.a,{className:"like-btn",style:{cursor:"pointer",fontSize:"1rem",marginRight:10},icon:p.a,onClick:this.likeTweet}))}}var T=b;class y extends a.Component{constructor(){super(...arguments),this.state={likedTweets:[]},this.getTweets=async()=>{if(this.props.user)return await d.a.get("/users/get/"+this.props.user).then(e=>{this.setState({likedTweets:e.data.likedTweets})}),!0},this.getLiked=e=>!(!this.state.likedTweets||!this.state.likedTweets.includes(e)),this.updateTweets=async()=>{this.props.updateUser(this.props.user),this.props.updateTweets(),console.log("updating tweets"),this.getTweets()}}componentDidMount(){this.getTweets()}render(){return this.props.tweets.slice(0).reverse().map(e=>e?r.a.createElement(T,{username:e.username,message:e.message,id:e._id,date:e.updatedAt,user:this.props.user,liked:this.getLiked(e._id),updateUser:this.props.updateUser,updateTweets:this.updateTweets}):r.a.createElement(r.a.Fragment,null))}}var f=y;class k extends a.Component{constructor(){super(...arguments),this.state={tweet:""},this.onChange=e=>this.setState({tweet:e.target.value}),this.onSubmit=async e=>{if(e.preventDefault(),null==this.props.user)alert("You Must Log In");else{console.log(this.state.tweet);const e={username:this.props.user,message:this.state.tweet};await d.a.post("/tweets/add",e).then(e=>console.log(e.data)),this.setState({tweet:""}),this.props.updateTweets()}}}render(){return r.a.createElement("form",{id:"tweet-box",className:"tweet-box",onSubmit:this.onSubmit},r.a.createElement("textarea",{type:"textarea",name:"tweet",autoComplete:"off",placeholder:"What's Happening?",value:this.state.tweet,onChange:this.onChange,form:"tweet-box",className:"textArea"}),r.a.createElement("input",{type:"submit",value:"Tweet",className:"btn"}))}}var S=k;class U extends a.Component{constructor(){super(...arguments),this.state={tweets:[]},this.getTweets=async()=>{console.log("Getting Tweets"),await d.a.get("/tweets/").then(e=>{this.setState({tweets:e.data})}).catch(e=>{console.log(e)})}}componentDidMount(){this.getTweets()}render(){return r.a.createElement("div",{className:"App-Body"},r.a.createElement("div",{className:"Tweet-List"},r.a.createElement(S,{user:this.props.user,updateTweets:this.getTweets}),0===this.state.tweets.length?r.a.createElement("h1",null,"Loading Tweets..."):r.a.createElement(f,{tweets:this.state.tweets,user:this.props.user,updateTweets:this.getTweets,updateUser:this.props.updateUser})))}}var C=U;class x extends a.Component{constructor(){super(...arguments),this.state={tweets:[],numLikes:0},this.getTweets=async()=>{await d.a.get("/tweets/get/"+this.props.user).then(e=>{this.setState({tweets:e.data})}).catch(e=>{console.log(e)})},this.getUser=async()=>{await d.a.get("/users/get/"+this.props.user).then(e=>{this.setState({numLikes:e.data.likedTweets.length})}).catch(e=>{console.log(e)})},this.refresh=()=>{this.getTweets(),this.getTweets()},this.logout=()=>{console.log("logging out"),d.a.get("/users/logout"),this.props.updateUser(null)}}componentDidMount(){this.getTweets(),this.getUser()}render(){return r.a.createElement("div",{className:"App-Body"},this.props.user?r.a.createElement("div",null,r.a.createElement("div",{className:"Tweet-List"},r.a.createElement("div",{className:"bio"},r.a.createElement("h1",null,"@",this.props.user),r.a.createElement("h4",{style:{opacity:"0.7"}}," Tweets: ",this.state.tweets.length," "),r.a.createElement("h4",{style:{opacity:"0.7"}}," Likes: ",this.state.numLikes," "),r.a.createElement("button",{className:"btn",style:{margin:0},onClick:this.logout},"Sign Out")),r.a.createElement(f,{tweets:this.state.tweets,user:this.props.user,updateTweets:this.getTweets,updateUser:this.props.updateUser}))):r.a.createElement("div",null,"Logged Out"))}}var N=x;class L extends a.Component{constructor(){super(...arguments),this.state={tweet_ID_List:[],tweets:[]},this.getTweetIDs=()=>{d.a.get("/users/get/"+this.props.user).then(e=>{this.setState({tweet_ID_List:e.data.likedTweets},this.getTweets)}).catch(e=>{console.log(e)})},this.getTweets=()=>{this.state.tweet_ID_List.forEach(e=>{console.log("Searching For: "+e),d.a.get("/tweets/"+e).then(e=>{this.setState({tweets:[...this.state.tweets,e.data]})}).catch(e=>{console.log(e)})})}}componentDidMount(){this.getTweetIDs()}render(){return r.a.createElement("div",{className:"App-Body"},this.props.user&&0!==this.state.tweets.length?r.a.createElement("div",{className:"Tweet-List"},r.a.createElement(f,{tweets:this.state.tweets,user:this.props.user,updateTweets:this.getTweetIDs,updateUser:this.props.updateUser})):r.a.createElement("div",null," You haven\u2019t liked any Tweets yet"))}}var D=L;class P extends a.Component{constructor(){super(...arguments),this.state={tweetsList:[],tweets:[]}}render(){return 0===this.state.tweets.length?r.a.createElement("div",{className:"App-Body"}," You aren't Following anyone yet"):r.a.createElement("div",{className:"App-Body"},"Following Page")}}var A=P;class I extends a.Component{render(){return r.a.createElement("div",{className:"App-Body"},"Search Page")}}var z=I;const B={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#15202b",padding:"20px",zIndex:1e3,borderRadius:20},R={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, .1)",zIndex:1e3};function _(e){let{open:t,onClose:s,user:a}=e;if(!t)return null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:R}),r.a.createElement("div",{style:B},r.a.createElement("div",{className:"close-btn"},r.a.createElement(c.a,{style:{color:"#1ea1f2"},icon:p.d,onClick:s})),r.a.createElement("div",{className:"Tweet-List"},r.a.createElement(S,{user:a,updateTweets:()=>{s()}}))))}class F extends a.Component{constructor(){super(...arguments),this.state={user:null,open:!1},this.updateUser=e=>{this.setState({user:e}),console.log("Logged in as: "+e)},this.toggleOpen=()=>{this.setState({open:!0})}}render(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("br",null),r.a.createElement("div",{className:"App-Body",style:{fontSize:"1.75em",fontWeight:"bold"}}," TwitterClone "),r.a.createElement(_,{open:this.state.open,onClose:()=>{this.setState({open:!1})},user:this.state.user},"Popup"),r.a.createElement("div",{className:"container"},r.a.createElement(h,{toggleOpen:this.toggleOpen,user:this.state.user}),r.a.createElement(o.b,{path:"/",exact:!0,render:e=>r.a.createElement(C,{user:this.state.user,updateUser:this.updateUser})}),r.a.createElement(o.b,{path:"/profile",exact:!0,render:e=>r.a.createElement(N,{user:this.state.user,updateUser:this.updateUser})}),r.a.createElement(o.b,{path:"/liked",exact:!0,render:e=>r.a.createElement(D,{user:this.state.user,updateUser:this.updateUser})}),r.a.createElement(o.b,{path:"/following",exact:!0,render:e=>r.a.createElement(A,{user:this.state.user})}),r.a.createElement(o.b,{path:"/search",exact:!0,render:e=>r.a.createElement(z,{user:this.state.user})}),r.a.createElement(o.b,{path:"/login",render:e=>r.a.createElement(w,{updateUser:this.updateUser})}),r.a.createElement(o.b,{path:"/SignUp",render:e=>r.a.createElement(v,{updateUser:this.updateUser})}))))}}var M=F;d.a.defaults.baseURL="https://twitter-clone-backend-4w9d.onrender.com",i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.87acb412.chunk.js.map